# React SPA - Architecture Diagram & Flow

## ğŸ—ï¸ High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    YOUR APPLICATION                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              React Frontend (Port 5173)              â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚   â”‚
â”‚  â”‚  â”‚   Browser   â”‚                                    â”‚   â”‚
â”‚  â”‚  â”‚ (index.html)â”‚                                    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                    â”‚   â”‚
â”‚  â”‚         â”‚                                           â”‚   â”‚
â”‚  â”‚         â–¼                                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚   â”‚
â”‚  â”‚  â”‚      App.jsx (Router)                â”‚          â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚          â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ Routes:                         â”‚ â”‚          â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ /login â†’ LoginPage              â”‚ â”‚          â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ /dashboard â†’ DashboardPage      â”‚ â”‚          â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ /markets â†’ MarketsPage          â”‚ â”‚          â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ /admin â†’ AdminPage              â”‚ â”‚          â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚          â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚   â”‚
â”‚  â”‚                  â–²                                  â”‚   â”‚
â”‚  â”‚                  â”‚                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚   â”‚
â”‚  â”‚  â”‚     AuthProvider (Context)           â”‚          â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚          â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ State:                       â”‚   â”‚          â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ - user (login info)          â”‚   â”‚          â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ - token (JWT)                â”‚   â”‚          â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ - loading                    â”‚   â”‚          â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚          â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ Methods:                     â”‚   â”‚          â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ - login()                    â”‚   â”‚          â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ - logout()                   â”‚   â”‚          â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚          â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚   â”‚
â”‚  â”‚                  â”‚                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚               â”‚              â”‚              â”‚   â”‚   â”‚
â”‚  â”‚  â–¼               â–¼              â–¼              â–¼   â”‚   â”‚
â”‚  â”‚  Components    Hooks          Services       Contextâ”‚  â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚   â”‚
â”‚  â”‚  â”‚ Header   â”‚  â”‚ useAuth  â”‚  â”‚ api.js   â”‚  Auth   â”‚   â”‚
â”‚  â”‚  â”‚ Layout   â”‚  â”‚ useApi   â”‚  â”‚ (Axios)  â”‚ Context â”‚   â”‚
â”‚  â”‚  â”‚ Dashboardâ”‚  â”‚ useData  â”‚  â”‚ JWT      â”‚         â”‚   â”‚
â”‚  â”‚  â”‚ Admin    â”‚  â”‚          â”‚  â”‚ Errors   â”‚         â”‚   â”‚
â”‚  â”‚  â”‚ Markets  â”‚  â”‚          â”‚  â”‚          â”‚         â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚   â”‚
â”‚  â”‚                                  â”‚                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚       Express Backend (Port 5001)                   â”‚   â”‚
â”‚  â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚       â”‚ /api/auth/login                         â”‚   â”‚   â”‚
â”‚  â”‚       â”‚ /api/auth/register                      â”‚   â”‚   â”‚
â”‚  â”‚       â”‚ /api/dashboard                          â”‚   â”‚   â”‚
â”‚  â”‚       â”‚ /api/markets                            â”‚   â”‚   â”‚
â”‚  â”‚       â”‚ /api/transactions                       â”‚   â”‚   â”‚
â”‚  â”‚       â”‚ /api/admin/*                            â”‚   â”‚   â”‚
â”‚  â”‚       â”‚ ... (all existing endpoints)            â”‚   â”‚   â”‚
â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                      â”‚                              â”‚   â”‚
â”‚  â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚   â”‚
â”‚  â”‚       â”‚    Database (PostgreSQL)    â”‚               â”‚   â”‚
â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow: Login Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User enters    â”‚
â”‚ credentials    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  LoginPage (Component)           â”‚
    â”‚  handleSubmit()                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  useAuth() hook                  â”‚
    â”‚  calls login()                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  AuthContext                     â”‚
    â”‚  Updates state:                  â”‚
    â”‚  - setUser()                     â”‚
    â”‚  - setToken()                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  useApi() hook                   â”‚
    â”‚  calls request()                 â”‚
    â”‚  POST /api/auth/login            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  api.js (Axios Client)           â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
    â”‚  â”‚ Interceptor:                 â”‚â”‚
    â”‚  â”‚ - Attach JWT token           â”‚â”‚
    â”‚  â”‚ - Handle errors              â”‚â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼ HTTP POST
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Express Backend                 â”‚
    â”‚  POST /api/auth/login            â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
    â”‚  â”‚ Check credentials            â”‚â”‚
    â”‚  â”‚ Generate JWT token           â”‚â”‚
    â”‚  â”‚ Return user + token          â”‚â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼ HTTP Response
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  AuthContext receives            â”‚
    â”‚  { user, token }                 â”‚
    â”‚  Saves to localStorage           â”‚
    â”‚  Triggers re-render              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  React Updates                   â”‚
    â”‚  Header re-renders               â”‚
    â”‚  Shows user info                 â”‚
    â”‚  Navigation changes available    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Navigate to /dashboard          â”‚
    â”‚  (NO FULL PAGE RELOAD!)          â”‚
    â”‚  Just component swap             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§© Component Hierarchy

```
App (with Router)
â”‚
â”œâ”€â”€ LoginPage (route: /login)
â”‚   â””â”€â”€ (no header, just login form)
â”‚
â””â”€â”€ MainLayout (wraps other routes)
    â”‚
    â”œâ”€â”€ Header
    â”‚   â”œâ”€â”€ Logo
    â”‚   â”œâ”€â”€ NavMenu
    â”‚   â”‚   â”œâ”€â”€ Link to /dashboard
    â”‚   â”‚   â”œâ”€â”€ Link to /markets
    â”‚   â”‚   â””â”€â”€ Link to /admin
    â”‚   â””â”€â”€ UserMenu
    â”‚       â””â”€â”€ Logout button
    â”‚
    â”œâ”€â”€ DashboardPage (route: /dashboard)
    â”‚   â”œâ”€â”€ Card (Balance)
    â”‚   â”œâ”€â”€ Card (Portfolio)
    â”‚   â””â”€â”€ PortfolioTable
    â”‚
    â”œâ”€â”€ MarketsPage (route: /markets)
    â”‚   â”œâ”€â”€ Card (Market Data)
    â”‚   â””â”€â”€ PriceTable
    â”‚
    â”œâ”€â”€ AdminPage (route: /admin)
    â”‚   â”œâ”€â”€ Card (Stats)
    â”‚   â”œâ”€â”€ UsersList
    â”‚   â””â”€â”€ AdminActions
    â”‚
    â””â”€â”€ NotFoundPage (route: /*)
```

---

## ğŸ”Œ State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Local Component State                â”‚
â”‚  (useState)                                  â”‚
â”‚  - form inputs                              â”‚
â”‚  - loading, error                           â”‚
â”‚  - temporary data                           â”‚
â”‚  Scope: Single component                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Custom Hook State                       â”‚
â”‚  (useAuth, useApi, etc.)                    â”‚
â”‚  - API response data                        â”‚
â”‚  - Derived data                             â”‚
â”‚  Scope: Components using the hook           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Global Context State                      â”‚
â”‚  (AuthContext)                              â”‚
â”‚  - Current user                             â”‚
â”‚  - JWT token                                â”‚
â”‚  - Auth status                              â”‚
â”‚  Scope: All components                      â”‚
â”‚  Storage: localStorage                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Request Lifecycle

```
Component calls:
  const data = await request('GET', '/endpoint')

     â”‚
     â–¼

useApi hook:
  - Shows loading = true
  - Clears error

     â”‚
     â–¼

axios instance (api.js):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Request Interceptor              â”‚
  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
  â”‚ â”‚ Add Authorization header:    â”‚ â”‚
  â”‚ â”‚ Authorization: Bearer <JWT>  â”‚ â”‚
  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼

Send HTTP request:
  GET /api/endpoint (with Authorization header)

     â”‚
     â–¼

Backend processes request

     â”‚
     â–¼

Response comes back:
  - 200: data
  - 401: Unauthorized
  - 500: Server error

     â”‚
     â–¼

axios Response Interceptor:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Check status code                â”‚
  â”‚ 401? Remove token, redirect      â”‚
  â”‚ 4xx/5xx? Extract error message   â”‚
  â”‚ 2xx? Return data                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼

useApi returns:
  - loading = false
  - error (if any)
  - data (if successful)

     â”‚
     â–¼

Component receives data
and re-renders
```

---

## ğŸ“Š File Dependency Graph

```
App.jsx (Router setup)
â”‚
â”œâ”€â”€ AuthProvider
â”‚   â””â”€â”€ AuthContext.jsx
â”‚
â”œâ”€â”€ Routes
â”‚   â”œâ”€â”€ LoginPage
â”‚   â”‚   â”œâ”€â”€ useAuth hook
â”‚   â”‚   â”œâ”€â”€ useApi hook
â”‚   â”‚   â””â”€â”€ api.js
â”‚   â”‚
â”‚   â”œâ”€â”€ MainLayout
â”‚   â”‚   â”œâ”€â”€ Header.jsx
â”‚   â”‚   â”‚   â””â”€â”€ useAuth hook
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ Pages:
â”‚   â”‚       â”œâ”€â”€ DashboardPage
â”‚   â”‚       â”‚   â”œâ”€â”€ useApi hook
â”‚   â”‚       â”‚   â”œâ”€â”€ Card component
â”‚   â”‚       â”‚   â””â”€â”€ PortfolioTable
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ MarketsPage
â”‚   â”‚       â”‚   â”œâ”€â”€ useApi hook
â”‚   â”‚       â”‚   â””â”€â”€ Card component
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ AdminPage
â”‚   â”‚       â”‚   â”œâ”€â”€ useAuth hook
â”‚   â”‚       â”‚   â”œâ”€â”€ useApi hook
â”‚   â”‚       â”‚   â””â”€â”€ Card component
â”‚   â”‚       â”‚
â”‚   â”‚       â””â”€â”€ NotFoundPage
â”‚
â””â”€â”€ Shared resources:
    â”œâ”€â”€ components/common/
    â”‚   â”œâ”€â”€ Card.jsx
    â”‚   â”œâ”€â”€ Modal.jsx
    â”‚   â””â”€â”€ ...
    â”‚
    â”œâ”€â”€ hooks/
    â”‚   â”œâ”€â”€ useAuth.js
    â”‚   â”‚   â””â”€â”€ uses AuthContext
    â”‚   â”‚
    â”‚   â”œâ”€â”€ useApi.js
    â”‚   â”‚   â””â”€â”€ uses api.js
    â”‚   â”‚
    â”‚   â””â”€â”€ custom hooks
    â”‚       â””â”€â”€ uses useApi hook
    â”‚
    â””â”€â”€ services/
        â””â”€â”€ api.js
            â”œâ”€â”€ axios instance
            â”œâ”€â”€ Request interceptor (JWT)
            â””â”€â”€ Response interceptor (errors)
```

---

## ğŸ” Auth Flow (Detailed)

```
START
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check localStorage      â”‚
â”‚ for existing token      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚          â”‚
    YES        NO
    â”‚          â”‚
    â–¼          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Token  â”‚  â”‚ No token â”‚
â”‚ found  â”‚  â”‚ Redirect â”‚
â”‚ Load   â”‚  â”‚ to login â”‚
â”‚ user   â”‚  â”‚ page     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User can access pages    â”‚
â”‚ Header shows user info   â”‚
â”‚ JWT auto-attached to     â”‚
â”‚ all API requests         â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User clicks Logout       â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Clear localStorage       â”‚
â”‚ Clear AuthContext state  â”‚
â”‚ Remove JWT header        â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Redirect to /login       â”‚
â”‚ Header hides user info   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User can only access     â”‚
â”‚ /login page              â”‚
â”‚ Protected routes blocked â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ localStorage Structure

```
localStorage
â”‚
â”œâ”€â”€ token (string - JWT)
â”‚   Stored by: AuthContext.login()
â”‚   Used by: api.js interceptor
â”‚   Cleared by: AuthContext.logout()
â”‚
â”œâ”€â”€ user (JSON string)
â”‚   {
â”‚     id: "123",
â”‚     email: "user@example.com",
â”‚     username: "user",
â”‚     isAdmin: false,
â”‚     balance: 1000,
â”‚     ...
â”‚   }
â”‚   Stored by: AuthContext.login()
â”‚   Used by: useAuth hook
â”‚   Cleared by: AuthContext.logout()
â”‚
â””â”€â”€ other state (optional)
    Can add more as needed
```

---

## ğŸ¯ Typical User Journey (NO PAGE RELOADS!)

```
1. Browser loads http://localhost:5173
   â”œâ”€â”€ Loads ONE index.html
   â”œâ”€â”€ Loads React bundle
   â””â”€â”€ Renders App.jsx

2. AuthProvider checks localStorage
   â”œâ”€â”€ If token exists â†’ logged in
   â””â”€â”€ If no token â†’ redirect to /login

3. IF LOGGED IN:
   â”œâ”€â”€ MainLayout renders
   â”œâ”€â”€ Header shows with user menu
   â”œâ”€â”€ DashboardPage content loads
   â””â”€â”€ User sees dashboard (NO RELOAD)

4. User clicks "Markets" link
   â”œâ”€â”€ React Router intercepts
   â”œâ”€â”€ DashboardPage unmounts
   â”œâ”€â”€ MarketsPage mounts
   â”œâ”€â”€ Content updates
   â””â”€â”€ NO page reload! âš¡ (same body)

5. User clicks "Admin" link
   â”œâ”€â”€ Check: user.isAdmin?
   â”œâ”€â”€ If admin: show AdminPage
   â”œâ”€â”€ If not: redirect to /dashboard
   â””â”€â”€ NO page reload! âš¡

6. User clicks "Logout"
   â”œâ”€â”€ Clear localStorage
   â”œâ”€â”€ Clear AuthContext
   â”œâ”€â”€ React Router redirects to /login
   â””â”€â”€ LoginPage renders
   â””â”€â”€ NO page reload! âš¡

7. User enters credentials & clicks Login
   â”œâ”€â”€ API call to /api/auth/login
   â”œâ”€â”€ Server validates
   â”œâ”€â”€ Returns token + user data
   â”œâ”€â”€ AuthContext saves to localStorage
   â”œâ”€â”€ React Router redirects to /dashboard
   â”œâ”€â”€ Dashboard loads user data
   â””â”€â”€ NO page reload! âš¡ (same index.html throughout)

ENTIRE JOURNEY = 1 HTML page load + React component swaps!
```

---

## ğŸ“ Key Insights

**Before (Multiple HTML files)**:
- Login â†’ Request `login.html` â†’ Load page â†’ Render
- Navigate â†’ Request `dashboard.html` â†’ Load page â†’ Render
- Every click = new HTTP request for HTML file

**After (React SPA)**:
- Load `index.html` once â†’ React renders
- Click link â†’ React swaps components â†’ Instant!
- Subsequent navigation = NO HTTP requests for HTML

**Performance Benefit**: 
- No re-parsing HTML/CSS
- No re-downloading assets
- Only swap components and fetch data
- **Much faster** UX!

---

All diagrams show how your new React SPA works! No full page reloads, clean architecture, everything connected. ğŸš€
